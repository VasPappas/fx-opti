<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Markowitz Sharpe Optimizer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Fraunces:opsz,wght@9..144,600;9..144,700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="backdrop"></div>
  <main class="shell">
    <header class="hero">
      <p class="kicker">Portfolio Lab</p>
      <h1>Markowitz Sharpe Optimizer</h1>
      <p class="subtitle">Pick between 2 and 15 assets, tune assumptions, and optimize instantly.</p>
    </header>

    <section class="grid">
      <article class="card input-card">
        <h2>Inputs</h2>
        <div class="top-controls">
          <label>
            Number of Assets
            <select id="assetCount"></select>
          </label>
        </div>

        <h3>Asset Names</h3>
        <div id="nameList" class="name-list"></div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Asset</th>
                <th>Expected Return (%)</th>
                <th>Volatility (%)</th>
              </tr>
            </thead>
            <tbody id="assetRows"></tbody>
          </table>
        </div>

        <h3>Correlation Matrix</h3>
        <div class="table-wrap">
          <div id="corrBulk" class="corr-bulk"></div>
        </div>
        <div class="table-wrap">
          <div id="corrGrid" class="corr-grid"></div>
        </div>

        <div class="controls">
          <label>
            Risk-Free Rate (%)
            <input id="rf" type="number" step="0.1" value="2" />
          </label>
          <label>
            Mode
            <select id="mode">
              <option value="long_only">Long-only (w >= 0)</option>
              <option value="unconstrained">Unconstrained (shorting allowed)</option>
            </select>
          </label>
          <label>
            Iterations (Long-only)
            <input id="iters" type="range" min="200" max="4000" step="200" value="1600" />
            <span id="itersValue">1600</span>
          </label>
        </div>

        <button id="optimizeBtn">Optimize Portfolio</button>
        <p id="error" class="error"></p>
      </article>

      <article class="card output-card">
        <h2>Optimal Portfolio</h2>
        <div class="stats">
          <div class="stat"><span>Expected Return</span><strong id="outReturn">-</strong></div>
          <div class="stat"><span>Volatility</span><strong id="outVol">-</strong></div>
          <div class="stat"><span>Sharpe Ratio</span><strong id="outSharpe">-</strong></div>
        </div>

        <div id="weights" class="weights"></div>

        <h3>Risk vs Return</h3>
        <canvas id="frontier" width="640" height="320" aria-label="Risk Return Scatter"></canvas>
      </article>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
